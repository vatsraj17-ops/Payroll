{% extends 'base.html' %}
{% block content %}
<h2>Payroll Entry</h2>
<form method="post" class="row g-2 mb-4">
  <div class="col-md-4">
    <select name="employee_id" class="form-select">
      <option value="">-- Select employee --</option>
      {% for e in employees %}
        <option value="{{ e.id }}">{{ e.first_name }} {{ e.last_name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-3">
    <input name="gross" class="form-control" placeholder="Gross pay (e.g., 2000)" required>
  </div>
  <div class="col-md-2 form-check align-self-center">
    <input class="form-check-input" type="checkbox" id="save" name="save">
    <label class="form-check-label" for="save">Save</label>
  </div>
  <div class="col-md-2">
    <button class="btn btn-primary">Calculate</button>
  </div>
</form>

{% if result %}
  <h4>Result</h4>
  <table class="table table-sm">
    <tbody>
      <tr><th>Gross</th><td>{{ result.gross }}</td></tr>
      <tr><th>CPP (employee)</th><td>{{ result.cpp_employee }}</td></tr>
      <tr><th>EI (employee)</th><td>{{ result.ei_employee }}</td></tr>
      <tr><th>Federal tax</th><td>{{ result.federal_tax }}</td></tr>
      <tr><th>Ontario tax</th><td>{{ result.ontario_tax }}</td></tr>
      <tr><th>Total deductions</th><td>{{ result.total_employee_deductions }}</td></tr>
      <tr><th>Net pay</th><td>{{ result.net_pay }}</td></tr>
      <tr><th>Employer total cost</th><td>{{ result.employer_total_cost }}</td></tr>
      <tr><th>Total remittance (gov)</th><td>{{ result.total_remittance }}</td></tr>
    </tbody>
  </table>
{% endif %}

{% endblock %}
